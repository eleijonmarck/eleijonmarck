{"data":{"post":{"title":"EchoServer for monitoring of applications","path":"/echo-server-for-monitoring-of-applications","date":"28. July 2019","timeToRead":1,"tags":[{"id":"backend","title":"backend","path":"/tag/backend"},{"id":"monitoring","title":"monitoring","path":"/tag/monitoring"}],"description":"EchoServer send whatever you `$ curl localhost:4000` 'sent to it'. \"sent to it\"","content":"<h3 id=\"echoserver\"><a href=\"#echoserver\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>EchoServer</h3>\n<blockquote>\n<p>An \"echo server\" is a server that does nothing more than sending back whatever is sent to it. What can you use it for ? Whatever you feel like.</p>\n</blockquote>\n<p>Practical application of using echoservers is troubleshooting of network and connectivity settings.</p>\n<p><a href=\"https://en.wikipedia.org/wiki/Echo_Protocol\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Echo Protocol</a></p>\n<p>Services around todays approach that most developers need to have some grasp of each segment, the goal of this text is to get you enlightened into troubleshooting your systems around building subnets and network to be able to connect your database server, web server and whatever external services for your firewall.</p>\n<p>A ping or a traceroute will establish if the server (IP address) can be reached but does not tell you if an application will be able to connect to the desired port on the server and whether a reply from the server will be able to reach the client again. You can use this echo server to troubleshoot networks, test a firewall (eg \"if I have a server listening on port 123, will my firewall allow connections to it.</p>\n<h3 id=\"simple-implementation-using-node-express\"><a href=\"#simple-implementation-using-node-express\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Simple implementation using node express</h3>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #D8DEE9\">$</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">cat</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">config</span><span style=\"color: #81A1C1\">/</span><span style=\"color: #D8DEE9\">index</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">js</span>\n<span style=\"color: #D8DEE9FF\">    </span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #8FBCBB\">module</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #8FBCBB\">exports</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #88C0D0\">port</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> process</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9FF\">env</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9FF\">port </span><span style=\"color: #81A1C1\">||</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">4000</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">}</span>\n<span style=\"color: #D8DEE9FF\">    </span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #D8DEE9\">$</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">cat</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">index</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">js</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">const</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">express</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #88C0D0\">require</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #A3BE8C\">express</span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #D8DEE9FF\">)</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">let</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">app</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #88C0D0\">express</span><span style=\"color: #D8DEE9FF\">()</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">let</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">config</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #88C0D0\">require</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #A3BE8C\">./config</span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #D8DEE9FF\">)</span>\n<span style=\"color: #D8DEE9FF\">    </span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #D8DEE9\">app</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">all</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #A3BE8C\">*</span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #D8DEE9\">req</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">res</span><span style=\"color: #ECEFF4\">)</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=&gt;</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #D8DEE9\">res</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">send</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #A3BE8C\">Alive</span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #D8DEE9FF\">)</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\">)</span>\n<span style=\"color: #D8DEE9FF\">    </span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #D8DEE9\">app</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">listen</span><span style=\"color: #D8DEE9FF\">(</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #D8DEE9\">config</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9FF\">port</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">()</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=&gt;</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">console</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">log</span><span style=\"color: #D8DEE9FF\">(</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #A3BE8C\">Server is listening on port</span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">config</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9FF\">port</span>\n<span style=\"color: #D8DEE9FF\">      )</span>\n<span style=\"color: #D8DEE9FF\">    )</span></code></pre>\n<blockquote>\n<p>You can use this echo server to troubleshoot networks, test a firewall (eg \"if I have a server listening on port 123, will my firewall allow connections to it</p>\n</blockquote>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #D8DEE9FF\">    $ node index.js</span>\n<span style=\"color: #D8DEE9FF\">    Server is listening on port 4000</span></code></pre>\n<p>This \"echo server\" can now be set up to listen on any desired port to simulate an application (web server port 80, postgresql 5432, ...). From the client, you can now <code class=\"shiki-inline\" style=\"background: #2e3440; color: #d8dee9\">telnet</code> to the port. Typing anything and receiving it; indicating that the telnet client and the echo server can talk to each other : you've established connectivity at the application level.</p>\n<pre class=\"shiki\" style=\"background-color: #2e3440\"><code><span style=\"color: #D8DEE9FF\">    $ curl localhost:4000</span>\n<span style=\"color: #D8DEE9FF\">    Alive</span></code></pre>\n","cover_image":{"type":"image","mimeType":"image/png","src":"/assets/static/echoserver.07cc2b7.367eb3c.png","size":{"width":860,"height":477},"sizes":"(max-width: 860px) 100vw, 860px","srcset":["/assets/static/echoserver.a67b0b2.367eb3c.png 480w","/assets/static/echoserver.07cc2b7.367eb3c.png 860w"],"dataUri":"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 860 477' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-24'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='10'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-24)' width='860' height='477' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAjCAYAAAAkCQwqAAAACXBIWXMAAAsTAAALEwEAmpwYAAAIcUlEQVRo3u1ZC2xURRSdt9sCrYr8VFAjGhQLbWE7u7RCBBQ/aDBoMEUoTYF%2bAIFSIn6ioCCGfymU1t23/VAQQVGQKGIkwaiJJiqJGBMVSQwJMTF%2bYlSUQvfzPHfmvt19u5byFUqY5HRmZ%2bbNe/fOvefemQpxuVwul3SZOvU3VU%2badFiUlR1VoFJRcUwUFR25dAWfMuVXUV5%2bQrWnT/8DAkfcs2ZZrhkzLDf6DeqfMSN66SrAMNJUPWbMZjF3rpUyXlERMtp/etUQXVsLhFgyWIilg/XvqtuEWJ7dKRUCgSfACloqKsLLysqO9dN94SQl%2bPOECPiEeHkoamkIU7pFgzdNIYC2X%2bp5pleI%2bryLRbYrgEwgHbg6caB79wG9qC4vD1XCCixCVZVlQRHflJb%2b3dO5TICFq4XwQa%2br3dcFZXzs5QuuBBJ6CfAYUEquDxQBhXCCStRzMjP7jp492/oW/g/Bo8fBAccrK6kdmiVSBNkA4Rt9Bvf1hAUUQeDFwCIo6GEop4saa0hQ0LqhF1IBGUAdCw9/FfcAa4FqKMAk8s/IuG4Wdv57VkAECghpBYSf0EssHCTEWyO18BuHaeFNWQL8JFqGWeLVfEtsATb6LPQdhCLGqDlvDicl0HxiGzdgK8XNfQbD7ne1M%2besuA64F4DfCjLhB4EbgN4YynK5uoynd86caS0mBZDwaJMiDiMS3Ow0fdvsTTlbbIbgTRA46A3jd5sCtUkhDV5SxP2n%2baGuDoQ4r6W09GgOhD4KBUThDrT7QepH22UrwcUkmKWE1UKGgCgE16A2jZElBOQRYZWSO9yKzyfTWwhMtAlXm6DIAm4CxnJ/PjCC2%2bR/q4Hsc6AE27KMhNqQ8gU35wB9QXo/PP642vkwlBBhJTzNfu8hn3bz7q9Q5q533IorQEa5jT5vSFnIh6PH4YkSvPJLFppMcRGwB3gS2AWUAW/wh74ILAfmAe8Bc4EDQN9zYQl1dXWiuLhY6J39UcDUXTrURRq1z0fbILziAXaDE%2bXlxwfq0LfzTg5v8n2xaRgJHo7tPAmtIG1LaFNK2jmc2PdRKOBr1DVMQLvZF%2b3yAPAD2RbwHfAS8DZbB5XXgGkJvHDWZfxDU0TJVMvQ4e/Y9RD0TxY4WlFhRVkJbRQSYQUrtALsYsqPlJ%2bTAuwddyKqXIMUsGvEMvXxLrEDNTQprgPeSRCohNmZLOJaYhmAntkGTOY5nwL3nwJPtF9qdRS6Zv0o4V4P3dfniClP7UvnROdRMn0ye62AKCmA6oh2icgXWgGNPpsAW8QrKS5gOdq2BewaQX48Dp9NO/s68CxwFwv1AdCsLETvPpX5PIfSzM%2bBvcQ%2bpy3wc1nxTauD%2bwbyKGQbClwsYXH2F16kd9o6BqFDxAGMNq2UyD/2ztsc8LBygaA3ToBmov/LCNdwEanz4%2b5p1%2bDv9UAffn8PYFCCX2dyuyvQjduUhd1%2bykKvxy5v8sWjlspYQdxNXue8DZ6umNv7iuqxtygFlEeq5s3TGeCcOZZF5Ec1/da8EPlZIM7rtHZLvq2M3WJrgSa7RPPXSgiLbTQm12hVVxmnEe7EaZk6kTOV6iH0TSQ0peapzwZkd%2bz%2bAFHvkaLWkwOX6J9WU5ChIkDJ725kfOMh6DpgByxiL%2bp3%2bUzwpM4F7JzezyZUnZuOF%2b0RzT6943ELiHBfnZq3fbghJiDncBtnGtudcwp6UZqt2/UeFhrnETtCxQ5quSR0P%2bAO4D5892hgINzhqsRptht0XIKxRMjNirgJL/9YJUKm16kA1Se34WVXsrXY3CHOmMC2IzV4ZoBQBy2/1Lvc5HPutCm7Qdgs4BFgsnJVf94gtK9yxkIortZjZKzRyWpZaSvxgBtRwA3SMxYutARMX/C9QJp9LxDnAFrUlL8wEYaTXIAUElapsSm/wst6OpKoUzkYLRioSStGYFKfOoN4/6sFIknoXhgbiXom6krUk6GgbNSZSRtoKOsll7HdBvWkoiMkqPo5bdpf6nIEcV/VZWWtorDwUMyHDDa7q7H4Ic4DOAokkaBWxAlOlvbGPoLcaGtB%2bwTW5Es4bkuttGTT1t9yM9adCDwPLFFnkkBeNpSb7hQaaTsJTVZT54krtP%2bZmGFj7AwQZMFOOLPAhETITEiJ9dz5Dvex%2baSWP2pNLrM23y00Jpn2Bo8b4z6MVSluMWUNfk8DUiMECU2hjtazT6AkdOGN5yB98udJZeKxsJecBTqyQU2Omg9%2bxrN9kizJuctbCpLfRZb2ELAS2A74gamYf8t/8JNb7TSttwLHhv1j48o9p8WUTez3oZQEKBnxnCDEzyyIWQERWGO7pj0T2ATsU9ZmymL093XMa/JpS9EhD0kPOGNzftzMz0uhHSTia4wlOu0LH0%2bHo4okddq8P2XN1dkuCJePsaWKK0z5GQtdiP4eJxWaSjM4o%2b7/um0y5QR1xA1yyAvKjhRgOeaRJfjzsnmt8UCzihKmPACYwDiMZzh5B1xg8h2jndZu9F2g2yVTViccgTsWPkaInBnqqDGd19rDOz1KrBuS5nhPA7tIIEFo2unVuRf4WpF8smVYatzvGDoa6Lyg5j/XJqEDLLSdJzQif192MV2tm/IwM3rkpOTX3tF4s1LeTrXW1jsMh9D1HhHLFF%2b6WP%2bfYMq/Um5/TokDvJoI9WXpR2qtnXfH7xgpJ1iV0wn%2bZdLss2LnfBUFZDz7Ozno0uQ4H58PiE98dsLSyf5nZMqAaIESKKaTMuhCtOEku09jFDI38jM6fFayzxuOG6ZOUwLyHpUM0b1/0Ps36taYRTh3vE2NBeE2OtStw7Na4tbi85ywnK/S5Iufy9fmpoOt6Zy9VF2MBECQ/rxW4B%2b0D6JvB%2bqnQW45YslgI%2bE8YYiV2c7/M3SS8i8jKcnZ1iqMRwAAAABJRU5ErkJggg==' /%3e%3c/svg%3e"}}},"context":{}}