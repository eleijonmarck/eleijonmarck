<!DOCTYPE html>
<html lang="en" class="astro-37FXCHFA">
<head>
  <!-- Global Metadata --><meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<link rel="icon" type="image/x-icon" href="/favicon.ico">


<!-- Primary Meta Tags -->
<title>Understanding Rusts uniqueness: Ownership</title>
<meta name="title" content="Understanding Rusts uniqueness: Ownership">
<meta name="description" content="A brief introduction to ownership in Rust">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://astro-blog-template.netlify.app/2022-10-02---rust-ownership">
<meta property="og:title" content="Understanding Rusts uniqueness: Ownership">
<meta property="og:description" content="A brief introduction to ownership in Rust">
<meta property="og:image" content="https://astro-blog-template.netlify.app/assets/social.png">

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://astro-blog-template.netlify.app/2022-10-02---rust-ownership">
<meta property="twitter:title" content="Understanding Rusts uniqueness: Ownership">
<meta property="twitter:description" content="A brief introduction to ownership in Rust">
<meta property="twitter:image" content="https://astro-blog-template.netlify.app/assets/social.png">

<!-- This is intentionally inlined to avoid FOUC -->

<link rel="stylesheet" href="/_astro/about.1d73de66.css" />
<link rel="stylesheet" href="/_astro/_slug_.6402d670.css" /><script type="module">const e=document.documentElement,t=localStorage.getItem("theme");t==="dark"||!t&&window.matchMedia("(prefers-color-scheme: dark)").matches?e.classList.add("theme-dark"):e.classList.remove("theme-dark");
</script></head>
<body class="astro-37FXCHFA">
  <div class="layout astro-37FXCHFA">
    

<header class="astro-3EF6KSR2">
  

<a href="/" class="astro-TVRURPNS">
  <img alt="Blog Logo" src="/assets/logo.png" width="75" height="50" class="astro-TVRURPNS">
</a>
  

<nav class="astro-DMQPWCEC">
  <a class=" astro-DMQPWCEC" href="/">home</a>
  <a class=" astro-DMQPWCEC" href="/about">about</a>
  <a class="selected astro-DMQPWCEC" href="/blog">blog</a>
  <div class="theme-toggle-container astro-DMQPWCEC">
    <style>astro-island,astro-slot{display:contents}</style><script>(self.Astro=self.Astro||{}).load=a=>{(async()=>await(await a())())()},window.dispatchEvent(new Event("astro:load"));var l;{const c={0:t=>t,1:t=>JSON.parse(t,o),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(JSON.parse(t,o)),5:t=>new Set(JSON.parse(t,o)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(JSON.parse(t)),9:t=>new Uint16Array(JSON.parse(t)),10:t=>new Uint32Array(JSON.parse(t))},o=(t,s)=>{if(t===""||!Array.isArray(s))return s;const[e,n]=s;return e in c?c[e](n):void 0};customElements.get("astro-island")||customElements.define("astro-island",(l=class extends HTMLElement{constructor(){super(...arguments);this.hydrate=()=>{if(!this.hydrator||this.parentElement&&this.parentElement.closest("astro-island[ssr]"))return;const s=this.querySelectorAll("astro-slot"),e={},n=this.querySelectorAll("template[data-astro-template]");for(const r of n){const i=r.closest(this.tagName);!i||!i.isSameNode(this)||(e[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(const r of s){const i=r.closest(this.tagName);!i||!i.isSameNode(this)||(e[r.getAttribute("name")||"default"]=r.innerHTML)}const a=this.hasAttribute("props")?JSON.parse(this.getAttribute("props"),o):{};this.hydrator(this)(this.Component,a,e,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),window.removeEventListener("astro:hydrate",this.hydrate),window.dispatchEvent(new CustomEvent("astro:hydrate"))}}connectedCallback(){!this.hasAttribute("await-children")||this.firstChild?this.childrenConnectedCallback():new MutationObserver((s,e)=>{e.disconnect(),this.childrenConnectedCallback()}).observe(this,{childList:!0})}async childrenConnectedCallback(){window.addEventListener("astro:hydrate",this.hydrate);let s=this.getAttribute("before-hydration-url");s&&await import(s),this.start()}start(){const s=JSON.parse(this.getAttribute("opts")),e=this.getAttribute("client");if(Astro[e]===void 0){window.addEventListener(`astro:${e}`,()=>this.start(),{once:!0});return}Astro[e](async()=>{const n=this.getAttribute("renderer-url"),[a,{default:r}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),i=this.getAttribute("component-export")||"default";if(!i.includes("."))this.Component=a[i];else{this.Component=a;for(const d of i.split("."))this.Component=this.Component[d]}return this.hydrator=r,this.hydrate},s,this)}attributeChangedCallback(){this.hydrator&&this.hydrate()}},l.observedAttributes=["props"],l))}</script><astro-island uid="lJg73" component-url="/_astro/ThemeToggleButton.be461bb1.js" component-export="default" renderer-url="/_astro/client.c4e17359.js" props="{&quot;class&quot;:[0,&quot;astro-DMQPWCEC&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;ThemeToggleButton&quot;,&quot;value&quot;:true}" await-children=""><div class="theme-toggle"><label class=""><!-- HTML_TAG_START --><svg
      xmlns="http://www.w3.org/2000/svg"
      width="20"
      height="20"
      viewBox="0 0 20 20"
      fill="currentColor"
    >
      <path
        fill-rule="evenodd"
        d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"
        clip-rule="evenodd"
      />
    </svg><!-- HTML_TAG_END -->
      <input type="radio" name="theme-toggle"  value="light" title="Use light theme" aria-label="Use light theme">
    </label><label class=""><!-- HTML_TAG_START --><svg
      xmlns="http://www.w3.org/2000/svg"
      width="20"
      height="20"
      viewBox="0 0 20 20"
      fill="currentColor"
    >
      <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z" />
    </svg><!-- HTML_TAG_END -->
      <input type="radio" name="theme-toggle"  value="dark" title="Use dark theme" aria-label="Use dark theme">
    </label></div></astro-island>
  </div>
</nav>
</header>

    <main class="astro-37FXCHFA">
      <header class="astro-4SN4ZG3R">
    <p class="astro-4SN4ZG3R">2022-10-02 ~ 4 min read</p>
    <h1 class="astro-4SN4ZG3R">Understanding Rusts uniqueness: Ownership</h1>
    <hr class="astro-4SN4ZG3R">
  </header><div class="container astro-4SN4ZG3R">
    <article class="content astro-4SN4ZG3R">
      <h2 id="rust-uniqueness-ownership">Rust uniqueness: Ownership</h2>
<p>Part of the success of why Rust is popular for performance AND safety is due to it’s unique way of handling memory. Most of the language before Rust approach memory management either via leaving the memory management entirely up to the developer of the application (C) or have a garbage collector swiping through the application from time to time.</p>
<p>I briefly want to touch upon why the previous approaches have been successful and vital upon on til today. C as a programming language is still by far the most performant, given that you handle the memory allocation as perfect as can be. There is no need for the runtime to have a separate service (the garbage collector) to handle pointers and memory allocation because in C, it assumes you have allocated and free memory appropriately. In languages like Go/Java or any other language using a garbage collector, we leave the memory management up to the runtime garbage collector, this makes for overhead during runtime where the garbage collector needs to take up time from the application running to remove memory where memory stored in the heap is no longer needed.</p>
<h3 id="why-are-we-talking-about-this-thinking_face">Why are we talking about this? :thinking_face:</h3>
<p>Performance and safety can be made together, as performance comes with runtime not having a garbage collector and safety comes when memory allocation happens only when needed. If you want a performant application (i am talking about performant software, where most bytes allocated counts and milliseconds for a service upstart of handling matters) than a garbage collector can slow the application down. It is also vital for security as most of the security loop holes come from bad memory management, see <a href="https://www.zdnet.com/article/microsoft-70-percent-of-all-security-bugs-are-memory-safety-issues/" target="_blank" rel="nofollow">microsoft post of 70%</a> of their security bugs come from bad memory management in their software. This is where Rust has introduced ownership.</p>
<h2 id="ownership">Ownership</h2>
<p>Ownership is composed of two rules:</p>
<ol>
<li>data has one owner
<ol>
<li>in rust you do not pass in a variable, you give ownership to that variable</li>
<li>when passing a variable into a function, you are giving ownership to that function of that variable</li>
</ol>
</li>
<li>data may have multiple readers or one writer</li>
</ol>
<p>Rusts compiler knows about ownership and due to property of strong types in Rust the compiler and especially the tooling <code>rust-analyser</code> can help identify these ownerships to us. This is why it feels like Rust is a bit of a learning curve and things won’t work out of the box, because it sets constraints on the ways we can manipulate the memory management in Rust. This is a good thing if you care about performance and safety. The example below show case that a simple printing step can be hard if you are not used to the compiler giving away errors to you directly.</p>
<pre is:raw="" class="astro-code" style="background-color: #2e3440ff; overflow-x: auto;"><code><span class="line"><span style="color: #81A1C1">fn</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">print_capitalized</span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9">s</span><span style="color: #81A1C1">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #8FBCBB">String</span><span style="color: #ECEFF4">)</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">upper_case</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">&#x26;</span><span style="color: #D8DEE9">s</span><span style="color: #81A1C1">.</span><span style="color: #88C0D0">to_uppercase</span><span style="color: #ECEFF4">();</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #88C0D0; font-style: italic">println!</span><span style="color: #ECEFF4">(</span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">upper_case: </span><span style="color: #EBCB8B">{}</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">upper_case</span><span style="color: #ECEFF4">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ECEFF4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #81A1C1">fn</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">main</span><span style="color: #ECEFF4">()</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">name</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #8FBCBB">String</span><span style="color: #81A1C1">::</span><span style="color: #88C0D0">from</span><span style="color: #ECEFF4">(</span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">hello</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">);</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #88C0D0">print_capitalized</span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9">name</span><span style="color: #ECEFF4">);</span><span style="color: #616E88"> // value moved here rustcE0382</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #88C0D0; font-style: italic">println!</span><span style="color: #ECEFF4">(</span><span style="color: #ECEFF4">"</span><span style="color: #EBCB8B">{}</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9">name</span><span style="color: #ECEFF4">);</span><span style="color: #616E88"> // borrow of moved value: `name` value borrowed here after move rustcE0382</span></span>
<span class="line"><span style="color: #ECEFF4">}</span></span></code></pre>
<p>This variable <code>name</code>s ownership is moved to the capitalize function and is therefore still with that function when we returned a new string from the function. So giving away ownership to the <code>print_capitilized</code> gives an error that we cannot use this function because the ownership of <code>name</code> still remains within the <code>print_capitilized</code> function. To fix our example Rust introduce a concept of <code>borrowing</code> a variable which gives us a way to tell the compiler that we only reference (borrow) this value for a while, annotated by <code>&#x26;</code>.</p>
<h3 id="borrowing">Borrowing</h3>
<p>Borrowing let’s us give away ownership to a function or a variable until it’s completion. The borrowing gives a pointer reference for the function to that memory with a ownership property and removes the ownership property onces that function has run it’s course. Let’s fix our example using the newly introduced concept of letting the complier know that we are borrowing this variable to the function.</p>
<pre is:raw="" class="astro-code" style="background-color: #2e3440ff; overflow-x: auto;"><code><span class="line"><span style="color: #81A1C1">fn</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">print_capitalized</span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9">s</span><span style="color: #81A1C1">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">&#x26;</span><span style="color: #8FBCBB">String</span><span style="color: #ECEFF4">)</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span><span style="color: #616E88"> // &#x3C;-- we need to tell the compiler that we are receiving a reference of some string</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">upper_case</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">&#x26;</span><span style="color: #D8DEE9">s</span><span style="color: #81A1C1">.</span><span style="color: #88C0D0">to_uppercase</span><span style="color: #ECEFF4">();</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #88C0D0; font-style: italic">println!</span><span style="color: #ECEFF4">(</span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">upper_case: </span><span style="color: #EBCB8B">{}</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">upper_case</span><span style="color: #ECEFF4">);</span></span>
<span class="line"><span style="color: #ECEFF4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #81A1C1">fn</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">main</span><span style="color: #ECEFF4">()</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">name</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #8FBCBB">String</span><span style="color: #81A1C1">::</span><span style="color: #88C0D0">from</span><span style="color: #ECEFF4">(</span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">hello</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">);</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #88C0D0">print_capitalized</span><span style="color: #ECEFF4">(</span><span style="color: #81A1C1">&#x26;</span><span style="color: #D8DEE9">name</span><span style="color: #ECEFF4">);</span><span style="color: #616E88"> // &#x3C;-- here we let print_capitalized "borrow" the value of name and use it, then letting go of the ownership once the function completes</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #88C0D0; font-style: italic">println!</span><span style="color: #ECEFF4">(</span><span style="color: #ECEFF4">"</span><span style="color: #EBCB8B">{}</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">name</span><span style="color: #ECEFF4">);</span></span>
<span class="line"><span style="color: #ECEFF4">}</span></span></code></pre>
<h2 id="links">Links</h2>
<p>70% memory issues - <a href="https://www.zdnet.com/article/microsoft-70-percent-of-all-security-bugs-are-memory-safety-issues/" target="_blank" rel="nofollow">https://www.zdnet.com/article/microsoft-70-percent-of-all-security-bugs-are-memory-safety-issues/</a></p>
    </article>
    <hr class="astro-4SN4ZG3R">
    <div class="astro-2JILUK5E">
  <img src="/assets/eric-small.png" alt="Headshot of Maxi Ferreira" class="astro-2JILUK5E">
  <p class="astro-2JILUK5E">
    Hi, I'm <strong class="astro-2JILUK5E">Eric</strong>. I'm a software engineer and data scientist based in Lisbon.
    You can follow me on <a href="https://www.twitter.com/eleijonmarck" target="_blank" class="astro-2JILUK5E">Twitter</a>,
    see some of my work on <a href="https://www.github.com/eleijonmarck" target="_blank" class="astro-2JILUK5E">GitHub</a>,
  </p>
</div>
  </div>
    </main>

    <footer class="astro-SZ7XMLTE">
  <span class="astro-SZ7XMLTE">
    &copy; 2023 A* information.
    Powered by <a href="https://astro.build" target="_blank" rel="noopener" class="astro-SZ7XMLTE">Astro</a>.
    Template by <a href="https://www.twitter.com/Charca" target="_blank" rel="noopener" class="astro-SZ7XMLTE">Maxi Ferreira</a>.
  </span>
</footer>
  </div>
</body></html>